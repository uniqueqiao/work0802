var Kbglt = false;(function () {var fastmyna_info='float||0|16||0,0||black|rt|||';var fastmyna_uuid='5ef2c88f4cff7';var default_language='zh-CN';var translate_url='tp.fastmyna.com';var all_languages=new Array();all_languages[0]=new Array('zh-CN','','简体中文');all_languages[1]=new Array('en','','English');function setCookie(name,value,days) {var expires = "";if (days) {var date = new Date();date.setTime(date.getTime() + (days*24*60*60*1000));expires = "; expires=" + date.toUTCString();}document.cookie = name + "=" + (value || "")  + expires + "; path=/";}function getCookie(name) {var nameEQ = name + "=";var ca = document.cookie.split(';');for(var i=0;i < ca.length;i++) {var c = ca[i];while (c.charAt(0)==' ') c = c.substring(1,c.length);if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);}return null;}function eraseCookie(name) {document.cookie = name+'=; Max-Age=-99999999;';}function getQueryString(name){var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");var r = location.search.substr(1).match(reg);if (r != null) return unescape(decodeURI(r[2]));return null;}class KbgltClass {constructor() {this.translate_hash = {};this.translated_hash = {};this.translated_restore_hash = {};this.kbglt_timeout = false;this.fastmyna_info = "";this.curr_language = "";this.is_posting = false;};clearlocal(){if (typeof localStorage === 'object') {localStorage.clear();}};initialize(website_init_info) {var $this = this;if(website_init_info){this.fastmyna_info = website_init_info}else{this.fastmyna_info = fastmyna_info;}var default_lan = getQueryString("kbg-lan");if(!default_lan){default_lan = getCookie("Kbglt-lan");console.log("---"+default_lan+"---");}if(default_lan){this.curr_language = default_lan;}else{this.curr_language = default_language;}this.initTranslateBtn();document.addEventListener("DOMContentLoaded", function () {document.body.addEventListener('DOMNodeInserted', function (evt) {if (evt.target.tagName=="STYLE" || (evt.target.className && evt.target.className.indexOf("no-translate")>-1) ) {}else if (evt.target.innerHTML) {$this.untranslatePage(evt.target);$this.setPreTranslates(evt.target);$this.getlocal(evt.target);$this.setTranslates();} else if (evt.target.nodeValue ) {if(evt.target.nodeValue*1==evt.target.nodeValue){}else if(evt.target.parentElement && evt.target.parentElement.className.indexOf("no-translate")>-1){}else if(evt.target.nodeValue.trim() ) {if(typeof($this.translated_hash[evt.target.nodeValue])!="undefined"){evt.target.nodeValue = $this.translated_hash[evt.target.nodeValue];}else{$this.translate_hash[evt.target.nodeValue] = "";$this.setTranslates();}}}}, false);$this.setPreTitle();$this.setPreTranslates();$this.getlocal();$this.getTranslates();$this.setTranslates();});this.initSysfun();};initTranslateBtn(){var $this = this;document.addEventListener("DOMContentLoaded", function () {if (all_languages.length > 0) {var setting = $this.fastmyna_info.split("|");var preview = "";var default_lan = getQueryString("kbg-lan");if(!default_lan){default_lan = getCookie("Kbglt-lan");}var initDoms = document.getElementsByClassName("kbg-translate-inner");if(initDoms.length>0){for(var j = 0,len = initDoms.length; j < len; j++){var initDom = initDoms[j];if(initDom.getAttribute("data-info")){setting = initDom.getAttribute("data-info").split("|");preview += $this.crateHtml(setting);}}}else {preview += $this.crateHtml(setting);}var kbg_language_dropdown = document.getElementsByClassName("kbg_flags_dropdown");if(kbg_language_dropdown){var i;for (i = 0; i < kbg_language_dropdown.length; i++) {kbg_language_dropdown[i].onchange = function () {var lan = this.value;if(lan=="kbg"){window.open("http://www.fastmyna.com/");}else{$this.setLanguage(lan);}};}}var kbg_language_link = document.getElementsByClassName("kbg_language_link");if(kbg_language_link){var i=0;for (i = 0; i < kbg_language_link.length; i++) {kbg_language_link[i].addEventListener('click', function(){var lan = this.getAttribute("data-lan");if(lan){$this.setLanguage(lan);if(document.getElementById("kbg-widget")){document.getElementById("kbg-widget").removeAttribute("data-show");}}}, false);}}if(document.getElementById("kbg-current")){document.getElementById("kbg-current").onclick = function () {document.getElementById("kbg-widget").setAttribute("data-show", "1");}}}});};crateHtml(setting){var preview = "";var default_lan = getQueryString("kbg-lan");if(!default_lan){default_lan = getCookie("Kbglt-lan");}if (setting[0] == "flags" || setting[0] == "flags_dropdown") {for (var i = 0; i < all_languages.length; i++) {var lan = all_languages[i];preview += '<a data-lan="' + lan[0] + '" class="no-translate kbg_language_link" style="cursor: pointer;">';preview += '<img src="//sys.fastmyna.com/api/flags/' + setting[3] + '/' + lan[0] + '.png" height="' + setting[3] + '" width="' + setting[3] + '"  />';preview += '</a>';}preview += '<a  target="_blank" href="http://www.fastmyna.com/" class="kbg_language_link kbg-self">';preview += '<img src="//sys.fastmyna.com/layui/images/logo/translate.png" style="border: 1px solid transparent;box-sizing: border-box;" height="' + setting[3] + '" width="' + setting[3] + '"  />';preview += '</a>';}if (setting[0] == "flags_dropdown" || setting[0] == "dropdown") {if(!isNaN(setting[9])){setting[9] = setting[9]+"px";}var width = setting[9]?"width:"+setting[9]+";":"";var color = setting[10]?"color:"+setting[10]+";":"";var fontsize = setting[11]?"font-size:"+setting[11]+"px;":"";var host = window.location.host;preview += '<select  id="kbg_flags_dropdown" class="kbg_flags_dropdown" style="display:block;padding: 0px 0 3px 0;font-size:14px;'+width+color+fontsize+'" data-open="' + setting[2] + '">';for (var i = 0; i < all_languages.length; i++) {var lan = all_languages[i];preview += '<option class="no-translate" '+(default_lan==lan[0]?"selected":"")+'    value="' + lan[0] + '" >' + lan[2] + '</option>';}preview += '<option value="kbg" class="kbg-self">翻译引擎</option>';preview += '</select>';}else if (setting[0] == "text") {var color = setting[10]?"color:"+setting[10]+";":"";var fontsize = setting[11]?"font-size:"+setting[11]+"px;":"";for (var i = 0; i < all_languages.length; i++) {var lan = all_languages[i];preview += '<a data-lan="' + lan[0] + '"   class="no-translate kbg_language_link" style="cursor: pointer;'+color+fontsize+'">';preview += lan[2];preview += '</a>&nbsp;&nbsp;';}preview += '<a  target="_blank" href="http://www.fastmyna.com/"   class="kbg_language_link kbg-self" style="'+color+fontsize+'">';preview += "翻译引擎";preview += '</a>&nbsp;&nbsp;';}else if (setting[0] == "float") {var bg = setting[7]?setting[7]:"black";var position2 = setting[8]?setting[8]:"rb";var style_string = '#kbg-widget #kbg-langs{color:#999; max-height: 90%; overflow-y: auto; overflow-x: hidden; -ms-overflow-style: -ms-autohiding-scrollbar; display: none; margin-bottom: 0; margin-top: 0;} #kbg-widget.rt #kbg-current, #kbg-widget.rt #kbg-langs{top:0; right:30px; position: fixed; z-index: 4456454;} #kbg-widget.rb #kbg-current, #kbg-widget.rb #kbg-langs{bottom:0; right:30px; position: fixed; z-index: 4456454;} #kbg-widget.lt #kbg-current, #kbg-widget.lt #kbg-langs{top:0; left:30px; position: fixed; z-index: 4456454;} #kbg-widget.lb #kbg-current{bottom:0; position: fixed; left:30px; z-index: 4456454;} #kbg-widget.lb #kbg-langs{bottom:0; position: fixed; left:30px; z-index: 4456455;}#kbg-widget[data-show="1"]  #kbg-langs{display:block;} #kbg-widget.lb #kbg-current, #kbg-widget.lb .kbg-self, #kbg-widget.rb #kbg-current, #kbg-widget.rb .kbg-self{border-radius: 4px 4px 0 0;} #kbg-widget #kbg-current{padding: 0 20px; max-width: 250px; height: 44px;line-height: 43px; font-size: 15px; text-decoration: none; display:inline-block;} #kbg-widget.black .kbg-self{ color: #fff; box-shadow: inset 0 1px 0 rgba(255,255,255,.2); text-align: center !important;} #kbg-widget.black #kbg-current, #kbg-widget.black #kbg-langs a{color: #999;background: rgb(20,20,20); background: rgba(20,20,20); box-shadow: inset 0 1px rgba(247,247,247,.1);} #kbg-widget.black #kbg-langs a:hover,#kbg-widget.black #kbg-langs a[active="1"]{background: rgb(0,0,0); background: rgba(0,0,0,.95); color: #fff;} #kbg-widget.white .kbg-self{background-color: #fff9ec; border: 1px solid #fff9ec; color: #fff; box-shadow: inset 0 1px 0 rgba(255,255,255,.2); text-align: center !important;} #kbg-widget.white #kbg-current, #kbg-widget.white #kbg-langs a{color: #999; border: 1px solid #fff9ec; background: #ffff; box-shadow: inset 0 1px rgba(247,247,247,.1);} #kbg-widget #kbg-langs a:hover{background: #fff; color: #666;} #kbg-widget #kbg-langs a{cursor: pointer; min-width: 105px; padding: 0 25px; border-bottom: 0; text-align: center; max-width: 250px; font-size: 15px; text-decoration: none; display: block; height:40px; line-height:40px;}@media screen and (min-width: 992px) { #kbg-widget:hover #kbg-langs{display:block;}}';var bodywidth = document.body.clientWidth;var style = document.createElement("style");style.appendChild(document.createTextNode(style_string));document.head.appendChild(style);var default_lan_local = all_languages[0][2];for (var i = 0; i < all_languages.length; i++) {var lan = all_languages[i];if(default_lan==lan[0]){default_lan_local = lan[2];}}preview += '<div id="kbg-widget" class="'+position2+' '+bg+'" >';preview += '<a id="kbg-current"  class="glink nturl no-translate">'+default_lan_local+'</a>';preview += '<div id="kbg-langs" >';if(position2=="rb"||position2=="lb"){preview += '<a   class="glink nturl kbg-self" target="_blank" href="http://www.fastmyna.com/" style="position:relative;">';preview += '翻译引擎';preview +='</a>';}for (var i = 0; i < all_languages.length; i++) {var lan = all_languages[i];preview += '<a data-lan="' + lan[0] + '"   class="no-translate kbg_language_link" style="cursor: pointer;">';preview += lan[2];preview += '</a>';}if(position2=="rt"||position2=="lt"){preview += '<a   class="glink nturl kbg-self" target="_blank" href="http://www.fastmyna.com/" style="position:relative;">';preview += '翻译引擎';preview +='</a>';}preview += '</div>';preview += '</div>';}if(setting[10] && setting[10]=="1"){preview = preview.replace("/zh-TW.png","/zh-HK.png");}else if(setting[10] && setting[10]=="2"){preview = preview.replace("/zh-TW.png","/zh-MO.png");}if(setting[11] &&setting[11]=="1"){preview = preview.replace("/en.png","/en-us.png");}if(setting[0] == "float"){var divObj = document.createElement("div");divObj.setAttribute("class", "kbg_flags_outer");divObj.innerHTML = '<div id="kbg_flags" >' + preview + '</div>';document.body.appendChild(divObj);}else {if (setting[4] == "1") {if (setting[6].indexOf(".") > -1) {var to = document.getElementsByClassName(setting[6].replace(".", ""))[0];} else if (setting[6].indexOf("#") > -1) {var to = document.getElementById(setting[6].replace("#", ""));}if (to ) {var divObj = document.createElement("div");divObj.setAttribute("class", "kbg_flags_outer");divObj.style.display = "inline-block";divObj.innerHTML = '<div id="kbg_flags">' + preview + '</div>';if(to.innerHTML.indexOf("kbg_flags_outer")<0){to.appendChild(divObj);}}} else if (setting[5] != "") {var t = setting[5].split(",");var bodywidth = document.body.clientWidth;if (bodywidth > 992) {t[0] = document.body.clientWidth / 2 - t[0];var divObj = document.createElement("div");divObj.setAttribute("class", "kbg_flags_outer");divObj.innerHTML = '<div id="kbg_flags" style="position:absolute;position:absolute;left:' + t[0] + 'px;top:' + t[1] + 'px;z-index:22222222">' + preview + '</div>';document.body.appendChild(divObj);}}}return preview;};initSysfun(){var $this = this;var _alert = window.alert;window.alert = function (arguments2) {if(arguments2){if(typeof($this.translated_hash[arguments2])=="undefined"){$this.translate_hash[arguments2] = "";$this.setTranslates();_alert(arguments2);}else{_alert($this.translated_hash[arguments2]);}}else{_alert();}};};setLanguage(lan){var $this = this;this.curr_language = lan;eraseCookie("Kbglt-lan");setCookie("Kbglt-lan",lan,365);if(this.curr_language == default_language) {this.untranslateTitle();this.untranslatePage();}else{var local = this.getlocal();if(!local){this.setTranslates(function(){$this.getTranslates();});}else{this.getTranslates();}}if(document.getElementById("kbg-current")){for (var i = 0; i < all_languages.length; i++) {if(lan==all_languages[i][0]){document.getElementById("kbg-current").innerText=all_languages[i][2];break;}}};var kbg_language_dropdown = document.getElementsByClassName("kbg_flags_dropdown");if(kbg_language_dropdown){var i;for (i = 0; i < kbg_language_dropdown.length; i++) {kbg_language_dropdown[i].value=lan;}};var kbg_language_links = document.getElementsByClassName("kbg_language_link");if(kbg_language_links){var i;for (i = 0; i < kbg_language_links.length; i++) {if(kbg_language_links[i].getAttribute("data-lan")==lan){kbg_language_links[i].setAttribute("active","1");}else{kbg_language_links[i].removeAttribute("active");}}}}getlocal(fobj){var $this = this;if($this.curr_language == default_language){return true;};var issafariBrowser = /Safari/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent);if (!issafariBrowser) {var local = localStorage.getItem("KBG-LAN-" + default_language + "-" + this.curr_language);}else{var local = false;}if(local){var localdata = JSON.parse(local);if(localdata && localdata.data){this.translated_hash = localdata.data;Object.keys($this.translated_hash).forEach(key => {if(typeof($this.translate_hash[key])!="undefined" ){$this.translated_restore_hash[$this.translated_hash[key]] = key;}else{delete $this.translated_hash[key];}});this.translateTitle();this.translatePage(fobj);return true;}else{return false;}}else{return false;}}getTranslates(callback){var $this = this;if($this.curr_language == default_language){return true;};var http =new XMLHttpRequest();http.open("post","//"+translate_url+"/publicAPI/getTranslates",true);http.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");http.send("uuid="+fastmyna_uuid+"&lan="+$this.curr_language);function showdata(callback){http.onreadystatechange =function(){if(http.readyState ==4 && http.status ==200){callback (http.response);}}}showdata (function(data){var rlt = JSON.parse(data);if(rlt.status=="1"){$this.getTranslatesAfter(rlt,data);if(typeof callback=="function"){callback();}}else if(rlt.status=="0") {$this.setLanguage(default_language);if(rlt.msg=="https-limit"){alert("亲，您在使用的免费版翻译引擎不支持https协议，请升级到付费版。");}}})};getTranslatesAfter(rlt,data){var $this = this;if(document.getElementsByClassName("kbg-self").length==0){return;}if(rlt.rateplan_id==0){if(document.location.protocol == "https:") {alert("亲，您在使用的免费版翻译引擎不支持https协议，请升级到付费版。");return;}}if(rlt.hide_logo=="1"){document.getElementsByClassName("kbg-self")[0].style.display="none";}else{document.getElementsByClassName("kbg-self")[0].style.display="inline-block";};$this.translated_hash = rlt.data;Object.keys($this.translated_hash).forEach(key => {if(typeof($this.translate_hash[key])=="undefined" ){delete $this.translated_hash[key];}});$this.untranslateTitle();$this.untranslatePage();$this.translated_restore_hash = {};Object.keys($this.translated_hash).forEach(key => {$this.translated_restore_hash[$this.translated_hash[key]] = key;});var issafariBrowser = /Safari/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent);if (!issafariBrowser) {localStorage.setItem("KBG-LAN-" + rlt.from + "-" + rlt.to, data);}$this.translateTitle();$this.translatePage();};loading(){var loading = '<div class="kbg_loading" style="width:64px;position: fixed;top:35%;left: 50%;margin-left: -50px;margin-top: -50px;z-index: 1000000;"><img  style="width:100px;" src="//sys.fastmyna.com/api/loading.svg" /></div>';var divObj = document.createElement("div");divObj.setAttribute("id", "kbg_loading_outer");divObj.innerHTML = loading;document.body.appendChild(divObj);};removeloading(){var dom = document.getElementById("kbg_loading_outer");dom.parentElement.removeChild(dom);};setTranslates(callbackfun){if(this.curr_language == default_language){return true;};var $this = this;if (this.qfylt_timeout)clearTimeout(this.qfylt_timeout);this.qfylt_timeout = setTimeout(function(){if($this.curr_language == default_language){return true;}if($this.is_posting){return;}var param = {};var http =new XMLHttpRequest();http.open("post","//"+translate_url+"/publicAPI/setTranslates",true);Object.keys($this.translate_hash).forEach(key => {if(!isNaN(key)){}else if(typeof($this.translated_restore_hash[key])!="undefined" || typeof($this.translated_hash[key])!="undefined"){}else{param[key] = $this.translate_hash[ key];}});if(Object.keys(param).length==0){if(typeof callbackfun=="function"){callbackfun();}console.log("---callback");return false;}param["kbgwebsiteuuid"] = fastmyna_uuid;param["kbglanguage"] = $this.curr_language;$this.loading();$this.is_posting = true;http.send(JSON.stringify(param));Object.keys(param).forEach(key => {$this.translated_hash[key]="";});function showdata(callback){http.onreadystatechange =function(){if(http.readyState ==4 && http.status ==200){callback (http.response);}}}showdata (function(data){$this.is_posting = false;$this.removeloading();var rlt = JSON.parse(data);if(rlt.status=="1"&&rlt.data) {$this.getTranslatesAfter(rlt,data);}else if(rlt.status=="0") {$this.setLanguage(default_language);if(rlt.msg=="https-limit"){alert("亲，您在使用的免费版翻译引擎不支持https协议，请升级到付费版。");}}})},1500);return true;};setPreTitle(){if(!this.translated_hash[document.title]){if(typeof(this.translate_hash[document.title])=="undefined" && document.title.trim()){this.translate_hash[document.title] = "";}}};translateTitle(){if(this.translated_hash[document.title] ){document.title = this.translated_hash[document.title];}};untranslateTitle(){if(this.translated_restore_hash[document.title] ){document.title = this.translated_restore_hash[document.title];}};setPreTranslates(fobj,toFT){toFT = toFT == null ? "1" : toFT;if (typeof (fobj) == "object") {var obj = fobj.childNodes;} else {var obj = document.body.childNodes}for (var i = 0; i < obj.length; i++) {var OO = obj.item(i);if(typeof OO.className=="string" ){if( OO.className.indexOf("no-translate")>-1 ){continue;}}if ("||BR|HR|SCRIPT|CSS|STYLE|IFRAME|EMBED|".indexOf("|" + OO.tagName + "|") > 0) continue;if (OO.title != "" && OO.title != null && OO.title.trim()!="" ) {if(!this.translated_hash[OO.title]){if(typeof(this.translate_hash[OO.title])=="undefined" ){this.translate_hash[OO.title] = "";}}}if (OO.alt != "" && OO.alt != null && OO.alt.trim()!="" ) {if(!this.translated_hash[OO.alt]) {if (typeof(this.translate_hash[OO.alt])=="undefined" ) {this.translate_hash[OO.alt] = "";}}}if (OO.placeholder != "" && OO.placeholder != null  && OO.placeholder.trim()!="") {if(!this.translated_hash[OO.placeholder]) {if (typeof(this.translate_hash[OO.placeholder])=="undefined") {this.translate_hash[OO.placeholder] = "";}}}if (OO.tagName == "INPUT" && OO.value != "" && OO.type != "text" && OO.type != "number" && OO.type != "email" && OO.type != "radio" && OO.type != "chekbox"&& OO.type != "hidden") {if(!this.translated_hash[OO.value]) {if (typeof(this.translate_hash[OO.value])=="undefined" ) {this.translate_hash[OO.value] = "";}}}if (OO.nodeType == 3) {if (OO.data) {if (OO.data.trim()) {if(!this.translated_hash[OO.data]) {if (typeof(this.translate_hash[OO.data])=="undefined") {this.translate_hash[OO.data] = "";}}}}} else this.setPreTranslates(OO, toFT);}};translatePage(fobj,toFT){toFT = toFT == null ? "1" : toFT;if (typeof (fobj) == "object") {var obj = fobj.childNodes;} else {var obj = document.body.childNodes}for (var i = 0; i < obj.length; i++) {var OO = obj.item(i);if (typeof OO.className == "string") {if( OO.className.indexOf("no-translate")>-1 ){continue;}}if ("||BR|HR|SCRIPT|CSS|STYLE|IFRAME|EMBED|".indexOf("|" + OO.tagName + "|") > 0) continue;if (OO.title != "" && OO.title != null) {if(this.translated_hash[OO.title] ){OO.title = this.translated_hash[OO.title];}}if (OO.placeholder != "" && OO.placeholder != null) {if(this.translated_hash[OO.placeholder] ){OO.placeholder = this.translated_hash[OO.placeholder];}}if (OO.alt != "" && OO.alt != null) {if(this.translated_hash[OO.alt] ){OO.alt = this.translated_hash[OO.alt];}}if (OO.tagName == "INPUT" && OO.value != "" && OO.type != "text" && OO.type != "number" && OO.type != "email" && OO.type != "radio" && OO.type != "checkbox"&& OO.type != "hidden") {if(this.translated_hash[OO.value] ){OO.value = this.translated_hash[OO.value];}}if (OO.nodeType == 3) {if (OO.data) {if (OO.data.trim()) {if(this.translated_hash[OO.data] ){OO.data = this.translated_hash[OO.data];}}}} else this.translatePage(OO, toFT);}};untranslatePage(fobj,toFT){toFT = toFT == null ? "1" : toFT;if (typeof (fobj) == "object") {var obj = fobj.childNodes;} else {var obj = document.body.childNodes}for (var i = 0; i < obj.length; i++) {var OO = obj.item(i);if(typeof OO.className=="string" ){if( OO.className.indexOf("no-translate")>-1 ){continue;}}if ("||BR|HR|SCRIPT|CSS|STYLE|IFRAME|EMBED|".indexOf("|" + OO.tagName + "|") > 0) continue;if (OO.title != "" && OO.title != null) {if(this.translated_restore_hash[OO.title] ){OO.title = this.translated_restore_hash[OO.title];}}if (OO.placeholder != "" && OO.placeholder != null) {if(this.translated_restore_hash[OO.placeholder] ){OO.placeholder = this.translated_restore_hash[OO.placeholder];}}if (OO.alt != "" && OO.alt != null) {if(this.translated_restore_hash[OO.alt] ){OO.alt = this.translated_restore_hash[OO.alt];}}if (OO.tagName == "INPUT" && OO.value != "" && OO.type != "text" && OO.type != "number" && OO.type != "email"&& OO.type != "radio" && OO.type != "chekbox"&& OO.type != "hidden") {if(this.translated_restore_hash[OO.value] ){OO.value = this.translated_restore_hash[OO.value];}}if (OO.nodeType == 3) {if (OO.data) {if (OO.data.trim()) {if(this.translated_restore_hash[OO.data] ){OO.data = this.translated_restore_hash[OO.data];}}}} else this.untranslatePage(OO, toFT);}};};if (typeof kbglt_init == 'undefined') {console.log("translating...");kbglt_init = true;Kbglt = new KbgltClass();Kbglt.initialize();}})();